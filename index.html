<!DOCTYPE html>
<html lang="en" ng-app="eyegeeApp">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Eye Gee</title>
    <meta name="description" content="Google Replacement">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Place favicon.ico and apple-touch-icon(s) in the root directory -->    
    <link rel="stylesheet" href="/static/main/css/styles.css">
    <script src="/bower_components/microload/microload.js"></script>
    <script src="/bower_components/jquery/jquery.min.js"></script>
    <script src="/bower_components/angular/angular.js"></script>
    <script src="/bower_components/angular-route/angular-route.js"></script>
    <script src="/bower_components/angular-widgetbox/angular-widgetbox.js"></script>
    <script src="/bower_components/angular-ui-utils/keypress.js"></script>
  </head>
  
  <body>

    <header ng-controller="NavigationController">
      <h1 class="main-title">EyeGee</h1>
      <nav class="main">
        <button type="button" id="new-widget-button" ng-click="newWidget()">
          NW
        </button>
        <button type="button" id="session-button" ng-click="doLoginOrRegister()">
          {{ sessionButtonTitle }}
        </button>
      </nav>
    </header>
    
    <!-- The column arrangement of widgets is created in a separate angular directive -->
    <main ng-controller="MainController">

      <section ng-repeat="column in columns" class="column wb-column col-{{ columns.length }}" widgetbox-column='wb-column' widgetbox-column-id="{{ $index }}">
        <div ng-repeat="widget in column" class="widget-container wb-widget" widgetbox-widget='wb-widget' widgetbox-draghandle="h3" widgetbox-widget-id="{{ $index }}">
          <h3>{{ widget.title }}</h3>
          <a href="javascript:;" ng-click="removeWidget(widget)">Remove</a>
          <a href="javascript:;" ng-click="editWidget(widget)">Settings</a>
          <widget-picker ng-show="!widget.module">
            <h5>What kind?</h5>
            <p ng-repeat="module in modules" ng-click="setModule(widget.id, module)">{{module}}</p>
          </widget-picker>

          <widget-body ng-show="widget.module" module="{{ widget.module }}" widget-id="{{ widget.id }}"></widget-body>
        </div>
      </section>

    </main>

    <footer></footer>

  </body>
  <script src="/state.js"></script>
  <script src="/static/main/js/main.js"></script>
</html>

